---
layout: jiny
title: 램프
---

## 램프(Lamp) CLI
---

램프(Lamp)는 지니 웹프레임워크의 CLI 툴 이름 입니다. CLI는 command line interface 의 약자로, 터미널과 같은 콘솔 모드에서 작업을 할 수 있는 소프트웨어를 말합니다.

CLI를 이용하면 복잡한 ui 대신에 간결한 명령으로 다양한 작업들을 자동화 처리 할 수 있습니다.

<br>

## 램프 기능
---

지니의 램프 CLI는 계속 사용자의 요구에 의해서 업그레이드 중에 있습니다. 현재 구현된 기능들은 다음과 같습니다.

주요기능
* 테마관리
* Ftp 작업
* 코드배포
* 백업(개발중)

<br>

## 호환성
---

여러 PHP 프레임웍 들은 자체 CLI 툴들을 가지고 있습니다. 이런 툴은 사용하는 프레임웍에 종속되어 동작을 합니다.

하지민 지니프레임의 렘프 CLI는 자체 프레임웍 이외에  다른 프로젝트에서서도 설치하여 사용할 수 있는 호환성을 유지하고 있습니다

램프를 같이 이용으로 기존 프레임웍의 부족한 기능들을 보완할 수 있을 것입니다.

이러한 특징만으로 여러분들이 램프를 사영하고 코드 개선에 기여할 명분이 될 것입니다.

<br>

## 테마(Theme)
---

테마기능은 램프 CLI 를 개발하게된 동기 입니다. 

지니 프레임워크는 테마기능을 통하여 전체작인 디자인 외형을 변경할 수 있습니다.

하지만 초보자들이 테마를 생성하고 만드는 것이 힘들어 할 수도 있습니다. 램프 cli의 테마기능을 통하여 쉽게 타 사이트를 카피하여 테마를 생성할 수 있습니다.

<br>

### 사이트 복제
---

램프는 curl 기능을 이용하여 외부의 사이트의 내용을 크롤링 하여 복제할 수 있습니다.

먼저 curl 기능이 활성화 되어 있는지 확인 바랍니다.

theme:make 테마명

Theme 폴더에 신규로 작업할 폴더를 만듭니다. 테마작업을 하기 위해서는 먼저 작업 테마 폴더를 하나 만들어야 합니다.


theme:geturl 테마명 주소
입력 주소의 url을 통하여 데이터를 읽어 옵니다. 읽어온 데이터를 temp.htm 파일로 저장을 합니다.

theme:parser 테마명
geturl 을 통하여 다운로드한 파일을 레이아웃에 맞게 분리작업을 합니다.

Layout, head, header, footer, index 형태로 분리합니다.

<br>

### 템플릿 엔진
---

램프는 다운로드 받은 웹파일을 분리작업 할때 liquid 템플릿 엔진을 적용 될 수 있도록 코드를 자동 생성 분리 합니다.

<br>

## FTP
---

램프는 간단한 ftp 클라이언트 기능을 제공합니다.

Ftp 기능을 사용하기 위해서는 php 내장 ftp모둘을 활성화 하여야 합니다.
설치된 php.ini 파일에서 모듈 부분의 주석을 제거해 주세요.




ftp:ls
FTP 서버의 파일 목록을 출력합니다.

php lamp ftp:ls .
서버의 루트 경로의 내용을 출력합니다.

파일 업로드
로컬 파일을 ftp 서버에 업로드를 합니다.

파일 삭제
서버의 파일을 삭제할 수 있습니다.

디렉토리 생성
서버의 디렉토리를 생성합니다.

디렉토리 삭제
서버의 디렉토리를 삭제합니다. 삭제시에는 디렉토리 안에 파일, 서브폴더가 없어야 합니다.

<br>

## 코드배포
---

작성한 코드를 서버로 옴기는 작업은 다양한 방식이 있습니다.
전형적인 ftp 접속, git 저장소를 이용한 배포등 입니다.

그중에서도 ftp는 가장 쉬운 서버접속 및 배포 방식입니다. Ftp를 이용하기 위해서는 별도의 접속 프로그램이 필요로 합니다.

램프는 자체 ftp 클라이언트 기능을 통하여 작성한 코드를 서버로 배포합니다.

php lamp deploy:명령 폴더

형태로 입력하면 됩니다.

<br>

### 접속설정
---

램프를 통하여 배포를 하기 위해서는 ftp 접속 계정을 가지고 있어야 합니다.

접속 계정은 .ftpconfig.php 파일에 작성을 하면 됩니다.


깃을 통하여 코드의 이력를 관리하는 경우 .ftpconfig.php 파일을 관리에서 제외 합니다. 
설정파일을 .gitignore 에 추가합니다.

<br>

### 증분배포
---

기존 ftp 프로그램을 이용한 코드 배포는 매번 파일들이 중복해서 업로드가 진행 됩니다.

이는 중복된 자원낭비와 시간이 소요 됩니다.
램프는 코드를 배포시에 로컬 파일과 서버의 파일 수정시간을 비교하여 코드를 업로드 합니다.

deploy:update 명령을 사용하면 됩니다.

<br>

#### 타임존
---
주의시항으로는 서버와 로컬 머신이 같은 타임존 위치에 속해야 합니다. 만일 시간이 동기화 되어 있지 않으면 시간을 이용한 증분 백업을 할 수 없습니다.

로컬의 타임존 변경은 php.ini 파일에서 변경을 할 수 있습니다.

<br>

### 업로드
---
가끔씩 코드 전체를 덥었는 형태로 일괄 업로드가 필요한 경우가 있습니다.

deploy:upload 명령은 시간을 비교하지 않고 모든 파일을 업로드 합니다.

Ignore 설정
배포작업시 제외할 파일이 있는 경우에는 ignore 파일을 설정하면 됩니다.

.ftpignore 파일에 배포시 제외할 파일이나 폴더 경로를 입력 하시면 됩니다.

Ignore 설정은 아직 완벽하지 않습니다.

/aaa
!/aaa/bbb

위와 같이 aaa폴더를 제외하지만 그안에 있는 /aaa/bbb 는 허용하는 형태의 패턴은 아직 구현이 되지 않았습니다.

아직 단순한 제외만 가능합니다.

<br>

## 백업
---

준비중…

## 확인
---

준비중…
타임존 확인
로컬의 타임존을 확인합니다.

Info:timezone

## 빌드
---

준비중…
지니 프레임 워크를 정적 웹사이트 빌더와 같이 사용을 할 수 있습니다.

```php
php lamp build
```

위와 같은 명령을 통하여 정적 웹페이지를 빌드 할 수 있습니다. 정적 웹사이트는 깃허브와 같은 곳을 통하여 무료로 페이지 호스팅을 할 수 있습니다.

리소스 페이지와 코드를 이용하여 동적으로 동작을 처리합니다.



