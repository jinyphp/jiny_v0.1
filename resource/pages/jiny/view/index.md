---
layout: jiny
---
# 뷰(view)

지니는 MVC 패턴을 적용하여 컨트롤러와 뷰가 분리되어 있습니다. 

## 뷰 헬퍼함수

헬퍼함수는 프레임워크 내에서 장소에 구분없이 호출하여 사용을 할 수 있는 장점이 있습니다. 또한 클래스의 인스턴스를 가지고 있지 않은 상태에서도 호출을 할 수 있는 장점이 있습니다.

```php
view(파일명, 데이터);
```

`view()`헬퍼함수는 두개의 인자값을 가지고 있습니다. 첫번째는 파일명, 두번째는 데이터 입니다.

<br>

## 데이터 전달

뷰에서 필요한 데이터는 연상배열로 작성하여 전달합니다. 만일 사이트에 메뉴와 설정파일등의 값을 같이 전달하고자 한다면, 미리 사전에 데이터 배열을 생성하여 전달 하여야 합니다.

```php
// 메뉴 데이터를 읽어옵니다.
$viewData['menus'] = menu();

if ($ret = view($viewFile, $viewData)) {
    return $ret;
} else {
    echo "404 페이지가 없습니다. from pages!";
}

```
위의 예제는 기본 `pageController`에서 데이터를 전달하는 부분을 캡쳐한 것입니다.


## 뷰호출

컨트롤러는 작업한 데이터를 뷰로 전달하여 화면에 출력할 수 있습니다.

```
$viewFile = "home";
$viewData = [];
return $this->view($viewFile, $viewData);
```

`view()`는 컨트롤러에서 제공되는 뷰 호출 매서드 입니다. `view()`는 두개의 인자값을 전달 받습니다. 

첫번째 인자는 뷰파일의 이름 입니다. 뷰 파일 이름은 문자열로 되어 있습니다. 만일 서브구조로 되어 있다면 디렉토리 구분자를 이용하여 같이 사용할 수 있습니다.
```
$viewFile = "home";
$viewFile = "home/test";
```

뷰 파일은 환경설정에서 설정한 리소스 폴더 안에 있습니다. 뷰 파일의 확장자는 `.htm` 파일 입니다. 만일 확장자를 변경하고자 하는 경우에는 환경설정 값을 변경해 주셔야 합니다.

두번재는 뷰로 전달되는 데이터 입니다. 뷰데이터는 배열되 되어 있습니다.

## 뷰 클래스
---

뷰 클래스는 독립적으로 객체 입니다.

뷰 클래스는 입력된 뷰파일 과 데이터를 받아서 화면을 랜더링 처리 합니다.

컨트롤러에서는 작업한 데이터를 뷰 클래스를 통하여 화면에 출력할 수 있습니다. 

뷰 클래스의 호출은 컨트롤러에서 가능합니다.

```php
$this->view(뷰파일, 데이터);
```

클래스에서 호출이 가능한 `view`메서드는 두개의 인자값을 가지고 있습니다. 첫번째는 출력화면의 디자인을 가지고 있는 뷰 파일명 입니다.
뷰 파일은 리소스 폴더안에 위치합니다.

두번째 인자는 데이터 입니다. 데이터는 처리한 값을 뷰에게 전달하는 역활을 합니다.

<br>

## 커스텀 Asset 설정
---

뷰파일은 테마와 결합되어 화면을 구성하게 됩니다. 테마는 사이트에서 공통적으로 이루어지는 화면과 스타일을 분리한 것입니다.

대부분의 뷰 작업들은 테마에서 설정한 CSS, Javascript를 공용하게 됩니다. 하지만, 일부 뷰 화면은 자신만의 스타일시트, 자바스크립트 모듈이 필요한 경우도 있습니다.
이런경우 뷰는 커스텀 Asset를 추가할 수 있습니다.

문서의 머리말 ymal 설정 부분에 css와 javascript 파일을 경로와 함께 적어 주시면 됩니다.

```php
css: "/asset/custom.css"
javascript: "/asset/custom.js"
```

## 커스텀 테마

테마설정은 기본적인 사이트 설정파일`site.ini`에서 정의합니다. 사이트의 뷰는 모두 이곳에서 설정된 테마 스타일을 따라 동작을 합니다.

일부 몇몇 기능, 뷰의 경우에는 다른 스타일의 테마적용이 필요할 수도 있습니다. 이런경우 뷰 파일의 머리말 설정에서 커스텀 테마를 설정합니다.

```php
theme: jiny/admin
```

커스텀 테마가 설정되어 있는 경우 사용자 지정 테마로 우선 동작을 하게 됩니다. 이 기능은 사이트에서 front / back 부분을 분리하여 사이트를 이중적으로 만들때 매우 유용합니다.





