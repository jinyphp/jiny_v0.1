---
layout: source
---
# 레지스트리
Application은 레지스트리 클래스를 초기화 하고 관련 몇가지 클래스의 인스턴스를 생성하여 등록하게 됩니다.

## 레지스트리 클래스
레지스트리 클래스는 싱글턴 패턴 방식으로 제작이 되어 있습니다. 싱글톤 패턴은 시스템에서 인스턴스를 한번만 생성이 가능하도록 제한하는 패턴입니다.

만일 시스템에서 레지스트리 인스턴스를 여러개를 만들어 사용을 한다고 하면 많은 혼돈이 발생될 것입니다.

싱클톤으로 만들게 되면, 중복으로 레지스트리 생성을 호출하게 되어도 한번만 생성을 하게 됩니다. 이는 인스턴스 관리를 안전하게 가능합니다.


## 레지스트리 초기값
프레임웍에서 필요한 필수적인 클래스들이 있을 것입니다. 이 클래스는 프로그램의 시작과 끝까지 필수적으로 필요한 경우일 것입니다.

레지스트리는 클래스의 인스턴스를 동적으로 생성하고 삭제할 수 있습니다.
하지만 처음에 필요한 클래스들은 초기값을 통하여 프로그램 시작시 미리 시작이 가능하도록 합니다.

초기값은 배열로 `키`, `클래스명` 한쌍의 배열형태의 값으로 작성을 합니다.

이렇게 작성된 초기값 배열은 레지스트리를 생성시 인자로 전달이 됩니다.

```
$this->Registry = Registry::init($init);
unset($init);
```

초기값 배열은 더이상 필요가 없기 때문에 메모리에서 삭제를 합니다.

## setInstance

레지스트리의 `setInstance`메소드는 생성된 클래스의 인스턴스를 키값으로 pool에 저장을 할 수 있는 기능입니다.

레지스트리에 Application 클래스도 접근할 수 있도록 자기 자신을 등록해 줍니다.
```
$this->Registry->setInstance("App", $this);
```

그리고 미리 생성하여 사용하던 페키지도 등록을 해주도록 합니다.

```
$this->Registry->setInstance("Packages", $this->Packages);
```

## pool
레지스트리는 인스턴스를 담고 있는 배열을 가지고 있습니다.
```

```


## 레지스트리 등록
레이지스트리에 클래스 인스턴스를 생성하여 등록을 처리할 수 있습니다.
레지스트리에 등록된 클래스는 싱글턴과 같은 효과를 보실 수 있습니다.

```php

```
